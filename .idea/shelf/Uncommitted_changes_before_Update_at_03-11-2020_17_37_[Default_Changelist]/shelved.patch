Index: app/src/main/java/com/example/bucketlist/fragments/homePageFragment/CityFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.bucketlist.fragments.homePageFragment;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBarDrawerToggle;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.view.GravityCompat;\r\nimport androidx.drawerlayout.widget.DrawerLayout;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.DefaultItemAnimator;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.swiperefreshlayout.widget.SwipeRefreshLayout;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.request.target.CustomTarget;\r\nimport com.bumptech.glide.request.transition.Transition;\r\nimport com.example.bucketlist.AddNewCity;\r\nimport com.example.bucketlist.AddNewPost;\r\nimport com.example.bucketlist.R;\r\nimport com.example.bucketlist.SeeMoreCities;\r\nimport com.example.bucketlist.SeemorePosts;\r\nimport com.example.bucketlist.adapters.PostRecyclerAdapter;\r\nimport com.example.bucketlist.adapters.RecyclerAdapterTrendingCard;\r\nimport com.example.bucketlist.adapters.PageAdapterTrendingCard;\r\nimport com.example.bucketlist.model.ActivityModel;\r\nimport com.example.bucketlist.model.CityModel;\r\nimport com.example.bucketlist.model.TrendingCardModel;\r\nimport com.example.bucketlist.myPost;\r\nimport com.google.android.material.navigation.NavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.CollectionReference;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.vansuita.gaussianblur.GaussianBlur;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\n\r\npublic class CityFragment extends Fragment implements View.OnClickListener {\r\n\r\n    private View view;\r\n\r\n    RecyclerView recyclerView,postRecyclerView;\r\n    ViewPager viewPager;\r\n    FirebaseFirestore firestore;\r\n    FirebaseAuth firebaseAuth;\r\n    private PageAdapterTrendingCard pageAdapterTrendingCard;\r\n    private List<TrendingCardModel> trendingCardModelList;\r\n    TextView createCity;\r\n    ImageView activity;\r\n    TextView seemore,postMore;\r\n\r\n    Toolbar toolbar;\r\n    DrawerLayout drawerLayout;\r\n    ActionBarDrawerToggle actionBarDrawerToggle;\r\n    NavigationView navigationView;\r\n    Context context;\r\n\r\n    String user_id;\r\n    String stringImageUri;\r\n\r\n    ImageView profileImage;\r\n    TextView profileName;\r\n\r\n\r\n    int currentPage = 0;\r\n    Timer timer;\r\n    final long DELAY_MS = 500;\r\n    final long PERIOD_MS = 3000;\r\n\r\n    RecyclerAdapterTrendingCard recyclerAdapterTrendingCard;\r\n    PostRecyclerAdapter postRecyclerAdapter;\r\n    List<CityModel> arrayList;\r\n    List<ActivityModel> List;\r\n\r\n\r\n\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n\r\n        view= inflater.inflate(R.layout.fragment_city,container,false);\r\n        createCity = view.findViewById(R.id.city);\r\n        activity = view.findViewById(R.id.activity);\r\n        viewPager = view.findViewById(R.id.viewPager);\r\n        seemore = view.findViewById(R.id.seemore);\r\n        postMore = view.findViewById(R.id.postMore);\r\n\r\n        toolbar = view.findViewById(R.id.toolBar);\r\n        ((AppCompatActivity)getActivity()).setSupportActionBar(toolbar);\r\n        drawerLayout = view.findViewById(R.id.drawer);\r\n        navigationView = view.findViewById(R.id.navigationView);\r\n        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n\r\n                switch (item.getItemId()){\r\n                    case R.id.myPost:\r\n                        Intent i = new Intent(getContext(), myPost.class);\r\n                        startActivity(i);\r\n                        break;\r\n                    case R.id.bookmark:\r\n\r\n\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n\r\n\r\n        actionBarDrawerToggle = new ActionBarDrawerToggle(this.getActivity(),drawerLayout,toolbar,R.string.draw_open,R.string.drawer_closed);\r\n        actionBarDrawerToggle.syncState();\r\n        actionBarDrawerToggle.getDrawerArrowDrawable().setColor(getResources().getColor(R.color.blackcolor));\r\n\r\n        View headerView = navigationView.getHeaderView(0);\r\n        ImageView cancelButton = headerView.findViewById(R.id.cancel_button);\r\n\r\n        cancelButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                drawerLayout.closeDrawer(GravityCompat.START);\r\n            }\r\n        });\r\n\r\n\r\n        firestore =FirebaseFirestore.getInstance();\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        context = getActivity().getApplicationContext();\r\n\r\n        activity.setOnClickListener(this);\r\n        createCity.setOnClickListener(this);\r\n        seemore.setOnClickListener(this);\r\n//        postMore.setOnClickListener(this);\r\n        recyclerView =  view.findViewById(R.id.recycler_view);\r\n\r\n        postRecyclerView=view.findViewById(R.id.recycler_view_post);\r\n\r\n        profileImage = headerView.findViewById(R.id.profileImage1);\r\n        profileName = headerView.findViewById(R.id.profileName1);\r\n        user_id = firebaseAuth.getCurrentUser().getUid();\r\n\r\n\r\n        trendingCardDataLoading();\r\n\r\n        PostLoading();\r\n\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext(),LinearLayoutManager.HORIZONTAL,false));\r\n        recyclerView.setItemAnimator(new DefaultItemAnimator());\r\n\r\n        trendingbottomCardDataLoading();\r\n\r\n       // autoScroll();\r\n\r\n        loadData(user_id);\r\n\r\n        return  view;\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        if (v.getId() == R.id.city){\r\n            Intent i = new Intent(getContext(), AddNewCity.class);\r\n            startActivity(i);\r\n        }\r\n\r\n        else if (v.getId() == R.id.activity){\r\n            Intent i = new Intent(getContext(), AddNewPost.class);\r\n            startActivity(i);\r\n        }\r\n\r\n        else if (v.getId() == R.id.seemore){\r\n            Intent i = new Intent(getContext(), SeeMoreCities.class);\r\n            startActivity(i);\r\n        }\r\n        else if (v.getId() == R.id.postMore){\r\n            Intent i = new Intent(getContext(), SeemorePosts.class);\r\n            startActivity(i);\r\n        }\r\n    }\r\n\r\n    public void trendingCardDataLoading(){\r\n\r\n\r\n        trendingCardModelList = new ArrayList<>();\r\n\r\n        CollectionReference collectionReference = firestore.collection(\"Cities\");\r\n        collectionReference.addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                if (error!=null){\r\n                    Log.d(\"Exception Failed\", \"onEvent: 0  \" + error);\r\n\r\n                }\r\n                else{\r\n                    for (final QueryDocumentSnapshot snapshot : value){\r\n                        DocumentReference documentReference = firestore.collection(\"Cities\").document(snapshot.getId());\r\n                        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                            @Override\r\n                            public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                                if (error!=null){\r\n                                    Log.d(\"Exception Failed\", \"onEvent: 0  \" + error);\r\n\r\n                                }\r\n                                else{\r\n                                    trendingCardModelList.add(new TrendingCardModel(value.getString(\"City Name\"),\r\n                                            value.getString(\"Country Name\"),\r\n                                            value.getString(\"City Background Image\"),snapshot.getId()));\r\n                                    pageAdapterTrendingCard.notifyDataSetChanged();\r\n                                    Log.d(\"size\",Integer.toString(trendingCardModelList.size()));\r\n                                }\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        pageAdapterTrendingCard = new PageAdapterTrendingCard(getContext(),trendingCardModelList);\r\n        viewPager.setAdapter(pageAdapterTrendingCard);\r\n        viewPager.setPadding(150,0,150,0);\r\n\r\n    }\r\n\r\n    public void trendingbottomCardDataLoading(){\r\n\r\n        arrayList = new ArrayList<>();\r\n\r\n        CollectionReference collectionReference = firestore.collection(\"Cities\");\r\n        collectionReference.addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                if (error!=null){\r\n                    Log.d(\"Exception Failed\", \"onEvent: 0  \" + error);\r\n\r\n                }\r\n                else{\r\n                    for (final QueryDocumentSnapshot snapshot : value){\r\n                        DocumentReference documentReference = firestore.collection(\"Cities\").document(snapshot.getId());\r\n                        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                            @Override\r\n                            public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                                if (error!=null){\r\n                                    Log.d(\"Exception Failed\", \"onEvent: 0  \" + error);\r\n\r\n                                }\r\n                                else{\r\n                                    arrayList.add(new CityModel(value.getString(\"City Background Image\"),\r\n                                            value.getString(\"City Name\"),\r\n                                            value.getString(\"Country Name\"),snapshot.getId()));\r\n                                    recyclerAdapterTrendingCard.notifyDataSetChanged();\r\n                                }\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        recyclerAdapterTrendingCard = new RecyclerAdapterTrendingCard(getContext(),arrayList);\r\n        recyclerView.setAdapter(recyclerAdapterTrendingCard);\r\n//        viewPager.setPadding(50,0,50,0);\r\n\r\n    }\r\n\r\n\r\n\r\n    public void autoScroll(){\r\n\r\n        final Handler handler = new Handler();\r\n        final Runnable Update = new Runnable() {\r\n            public void run() {\r\n\r\n                if (viewPager.getCurrentItem() == trendingCardModelList.size()-1) {\r\n                    currentPage=0;\r\n                }\r\n\r\n//                viewPager.setCurrentItem(currentPage, true);\r\n//                currentPage++;\r\n            }\r\n        };\r\n\r\n        timer = new Timer(); // This will create a new Thread\r\n        timer.schedule(new TimerTask() { // task to be scheduled\r\n            @Override\r\n            public void run() {\r\n\r\n                handler.post(Update);\r\n            }\r\n        }, DELAY_MS, PERIOD_MS);\r\n    }\r\n\r\n    public void PostLoading(){\r\n\r\n        List = new ArrayList<>();\r\n\r\n        CollectionReference collectionReference = firestore.collection(\"Posts\");\r\n        collectionReference.addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                if (error!=null){\r\n                    Log.d(\"Exception Failed\", \"onEvent: 0  \" + error);\r\n\r\n                }\r\n                else{\r\n                    for (final QueryDocumentSnapshot snapshot : value){\r\n                        DocumentReference documentReference = firestore.collection(\"Posts\").document(snapshot.getId());\r\n                        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                            @Override\r\n                            public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                                if (error!=null){\r\n                                    Log.d(\"Exception Failed\", \"onEvent: 0  \" + error);\r\n\r\n                                }\r\n                                else{\r\n                                   List.add(new ActivityModel(value.getString(\"createdBy\"),\r\n                                           value.getString(\"title\"),\r\n                                           value.getLong(\"timeStamp\").longValue(),\r\n                                           value.getString(\"location\"),\r\n                                           value.getLong(\"likes\").intValue(),\r\n                                           value.getId()));\r\n                                    postRecyclerAdapter.notifyDataSetChanged();\r\n                                }\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        postRecyclerAdapter = new PostRecyclerAdapter(getContext(),List);\r\n        postRecyclerView.setAdapter(postRecyclerAdapter);\r\n\r\n\r\n    }\r\n    private void loadData(String user_id) {\r\n        DocumentReference documentReference = firestore.collection(\"Users\").document(user_id);\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                if (error!=null){\r\n                    Log.d(\"City Fragment error\",\"Error:\"+error.getMessage());\r\n                }\r\n                else {\r\n                    profileName.setText(value.getString(\"Display Name\"));\r\n                    stringImageUri = value.getString(\"Image Uri\");\r\n                    Glide.with(context).load(stringImageUri).into(profileImage);\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/bucketlist/fragments/homePageFragment/CityFragment.java	(revision 9e29bf1ba83358fffe0eb75ce51ef550adee6bff)
+++ app/src/main/java/com/example/bucketlist/fragments/homePageFragment/CityFragment.java	(date 1604405170454)
@@ -225,11 +225,13 @@
 
                                 }
                                 else{
+
                                     trendingCardModelList.add(new TrendingCardModel(value.getString("City Name"),
                                             value.getString("Country Name"),
                                             value.getString("City Background Image"),snapshot.getId()));
                                     pageAdapterTrendingCard.notifyDataSetChanged();
                                     Log.d("size",Integer.toString(trendingCardModelList.size()));
+
                                 }
 
                             }
