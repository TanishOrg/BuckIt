Index: app/src/main/java/com/example/bucketlist/layout/userLayout/DetailProfile.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.bucketlist.layout.userLayout;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.request.target.CustomTarget;\r\nimport com.bumptech.glide.request.transition.Transition;\r\nimport com.example.bucketlist.HomeActivity;\r\nimport com.example.bucketlist.PhotoFullPopupWindow;\r\nimport com.example.bucketlist.R;\r\nimport com.example.bucketlist.layout.loginLayouts.LoginByEmailActivity;\r\nimport com.example.bucketlist.layout.openingScreen.Third_Content;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.vansuita.gaussianblur.GaussianBlur;\r\n\r\nimport java.net.URL;\r\n\r\npublic class DetailProfile extends AppCompatActivity implements View.OnClickListener {\r\n\r\n    private static final String TAG =\"Detail Profile\" ;\r\n    private Button signoutButton,deleteButton;\r\n    EditText displayName,emailAddress,phoneNumber;\r\n    ImageView profileImage , editButton , backButton,profileBackground ;\r\n    FirebaseFirestore firebaseFirestore;\r\n    FirebaseAuth firebaseAuth;\r\n    FirebaseUser firebaseUser;\r\n    FirebaseStorage firebaseStorage;\r\n    StorageReference storageReference;\r\n    String StringImageUri,name,email,phone;\r\n    ProgressBar progressBar2;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = firebaseAuth.getCurrentUser();\r\n        firebaseStorage = FirebaseStorage.getInstance();\r\n        storageReference =firebaseStorage.getReference().child(firebaseUser.getUid());\r\n        setContentView(R.layout.activity_detail_profile);\r\n\r\n        progressBar2=findViewById(R.id.progressBar2);\r\n\r\n        //initializing view\r\n        initialization();\r\n\r\n        signoutButton.setOnClickListener(this);\r\n        editButton.setOnClickListener(this);\r\n        backButton.setOnClickListener(this);\r\n\r\n        profileImage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                new PhotoFullPopupWindow(getApplicationContext(), R.layout.popup_photo_full, v, StringImageUri, null);\r\n            }\r\n        });\r\n\r\n        deleteButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                AlertDialog.Builder dialog = new AlertDialog.Builder(DetailProfile.this,R.style.AlertDialogTheme);\r\n                dialog.setTitle(\"Are you sure?\");\r\n                dialog.setMessage(\"Deleting this account will result in completely removing your account from  the system\");\r\n                dialog.setPositiveButton(\"Delete\", new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        progressBar2.setVisibility(View.VISIBLE);\r\n                        firebaseFirestore = FirebaseFirestore.getInstance();\r\n                        firebaseFirestore.collection(\"Users\").document(firebaseUser.getUid()).collection(\"items\").get()\r\n                                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                                if (task.isSuccessful()){\r\n                                    for (QueryDocumentSnapshot document : task.getResult()){\r\n                                        Log.d(\"item deleting\",\"first\"+task.getException());\r\n                                        firebaseFirestore.collection(\"Users\").document(firebaseUser.getUid()).collection(\"items\").document(document.getId()).delete();\r\n                                    }\r\n                                    Log.d(\"Message1\", \"Items deleted\");\r\n                                    DocumentReference docReference = firebaseFirestore.collection(\"Users\").document(firebaseUser.getUid());\r\n                                    docReference.delete().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                        @Override\r\n                                        public void onComplete(@NonNull Task<Void> task) {\r\n                                            if(task.isSuccessful()){\r\n                                                Log.d(\"Message2\",\"user info delete\"+task.getException());\r\n\r\n                                                final StorageReference photoRef = storageReference.child(\"profileImage.jpeg\");\r\n\r\n                                                photoRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                                    @Override\r\n                                                    public void onSuccess(Uri uri) {\r\n                                                        photoRef.delete().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                                            @Override\r\n                                                            public void onComplete(@NonNull Task<Void> task) {\r\n                                                                if (task.isSuccessful()){\r\n                                                                    Log.d(\"delete\",\"user profile storage\");\r\n                                                                    firebaseUser.delete().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                                                        @Override\r\n                                                                        public void onComplete(@NonNull Task<Void> task) {\r\n                                                                            if(task.isSuccessful()){\r\n                                                                                Log.d(\"user account\",\"delete\"+task.getException());\r\n                                                                                progressBar2.setVisibility(View.GONE);\r\n                                                                                Toast.makeText(DetailProfile.this,\"Account Deleted\",Toast.LENGTH_LONG).show();\r\n\r\n                                                                                Intent i = new Intent(DetailProfile.this, LoginByEmailActivity.class);\r\n                                                                                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                                                                                startActivity(i);\r\n                                                                            }else{\r\n                                                                                Toast.makeText(DetailProfile.this,\"user account not deleted\"+task.getException().getMessage(),Toast.LENGTH_LONG).show();\r\n                                                                            }\r\n                                                                        }\r\n                                                                    }).addOnFailureListener(new OnFailureListener() {\r\n                                                                        @Override\r\n                                                                        public void onFailure(@NonNull Exception e) {\r\n                                                                            Log.e(TAG,\"Error in deleting account\", e);\r\n                                                                            String error = String.valueOf(e);\r\n                                                                            Intent i = new Intent(DetailProfile.this, LoginByEmailActivity.class);\r\n                                                                            i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                                                                            startActivity(i);\r\n                                                                        }\r\n                                                                    });\r\n                                                                }\r\n                                                                else{\r\n                                                                    Toast.makeText(DetailProfile.this,\"storage \" +task.getException().getMessage(), Toast.LENGTH_SHORT).show();\r\n                                                                }\r\n                                                            }\r\n                                                        });\r\n                                                    }\r\n                                                }).addOnFailureListener(new OnFailureListener() {\r\n                                                    @Override\r\n                                                    public void onFailure(@NonNull Exception e) {\r\n\r\n                                                        firebaseUser.delete().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                                            @Override\r\n                                                            public void onComplete(@NonNull Task<Void> task) {\r\n                                                                if(task.isSuccessful()){\r\n                                                                    Log.d(\"user account\",\"delete\"+task.getException());\r\n                                                                    progressBar2.setVisibility(View.GONE);\r\n                                                                    Toast.makeText(DetailProfile.this,\"Account Deleted\",Toast.LENGTH_LONG).show();\r\n\r\n                                                                    Intent i = new Intent(DetailProfile.this, LoginByEmailActivity.class);\r\n                                                                    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                                                                    startActivity(i);\r\n                                                                }else{\r\n                                                                    Toast.makeText(DetailProfile.this,\"user account not deleted\"+task.getException().getMessage(),Toast.LENGTH_LONG).show();\r\n                                                                }\r\n                                                            }\r\n                                                        }).addOnFailureListener(new OnFailureListener() {\r\n                                                            @Override\r\n                                                            public void onFailure(@NonNull Exception e) {\r\n                                                                Log.e(TAG,\"Error in deleting account\", e);\r\n                                                                String error = String.valueOf(e);\r\n                                                                Intent i = new Intent(DetailProfile.this, LoginByEmailActivity.class);\r\n                                                                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                                                                startActivity(i);\r\n                                                            }\r\n                                                        });\r\n\r\n                                                    }\r\n                                                });\r\n                                            }else{\r\n                                                Toast.makeText(DetailProfile.this,\"user info not deleted\"+task.getException().getMessage(),Toast.LENGTH_LONG).show();\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    }\r\n                });\r\n                dialog.setNegativeButton(\"Dismiss\", new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        dialog.dismiss();\r\n                    }\r\n                });\r\n                AlertDialog alertDialog= dialog.create();\r\n                alertDialog.show();\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n        FirebaseUser firebaseUser = firebaseAuth.getCurrentUser();\r\n        firebaseFirestore = FirebaseFirestore.getInstance();\r\n        DocumentReference documentReference = firebaseFirestore.collection(\"Users\").document(firebaseUser.getUid());\r\n\r\n\r\n        documentReference.addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                if (error!=null){\r\n                    Log.d(TAG,\"Error:\"+error.getMessage());\r\n                }\r\n                else {\r\n                    name = value.getString(\"Display Name\");\r\n                    displayName.setText(name);\r\n\r\n                    email =  value.getString(\"Email Address\");\r\n                    emailAddress.setText(email);\r\n\r\n                    phone = value.getString(\"Phone Number\");\r\n                    phoneNumber.setText(phone);\r\n\r\n                    StringImageUri = value.getString(\"Image Uri\");\r\n                    Glide.with(getApplicationContext()).load(StringImageUri).into(profileImage);\r\n                    Glide.with(getApplicationContext())\r\n                            .load(StringImageUri)\r\n                            .into(new CustomTarget<Drawable>() {\r\n                                @Override\r\n                                public void onResourceReady(@NonNull Drawable resource, @Nullable Transition<? super Drawable> transition) {\r\n                                    GaussianBlur.with(getApplicationContext()).radius(20).put(resource,profileBackground);\r\n                                }\r\n\r\n                                @Override\r\n                                public void onLoadCleared(@Nullable Drawable placeholder) {\r\n\r\n                                }\r\n                            });\r\n                    Log.i(TAG, \"String: \"+StringImageUri);\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n   private void initialization(){\r\n        signoutButton = findViewById(R.id.signoutButton);\r\n        displayName = findViewById(R.id.displayName);\r\n        emailAddress = findViewById(R.id.emailAddress);\r\n        profileImage = findViewById(R.id.profileImage);\r\n        phoneNumber = findViewById(R.id.phoneNumber);\r\n        editButton = findViewById(R.id.editButton);\r\n        backButton = findViewById(R.id.backButton);\r\n        deleteButton=findViewById(R.id.deleteButton);\r\n        profileBackground = findViewById(R.id.profileBackground);\r\n\r\n\r\n}\r\n\r\n   public void onClickSignoutButton(){\r\n       if (firebaseAuth != null) {\r\n           firebaseAuth.signOut();\r\n           Intent i = new Intent(DetailProfile.this, LoginByEmailActivity.class);\r\n           i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\r\n           startActivity(i);\r\n       }\r\n   }\r\n\r\n   public void onClickEditButton(){\r\n        Intent i = new Intent(DetailProfile.this,EditProfileActivity.class);\r\n        startActivity(i);\r\n\r\n    }\r\n\r\n\r\n    public void onClickBackButton(){\r\n        Intent i = new Intent(DetailProfile.this, HomeActivity.class);\r\n        startActivity(i);\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        if(v.getId() == R.id.signoutButton){\r\n            onClickSignoutButton();\r\n        }\r\n\r\n        else if (v.getId() == R.id.editButton){\r\n            onClickEditButton();\r\n        }\r\n        else if (v.getId() == R.id.backButton){\r\n            onClickBackButton();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/bucketlist/layout/userLayout/DetailProfile.java	(revision d3af9784b93358ee52c11c6c03bbebd0cab4015b)
+++ app/src/main/java/com/example/bucketlist/layout/userLayout/DetailProfile.java	(date 1603173930252)
@@ -60,12 +60,6 @@
     String StringImageUri,name,email,phone;
     ProgressBar progressBar2;
 
-
-
-
-
-
-
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
